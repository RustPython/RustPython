---
source: crates/codegen/src/compile.rs
expression: "compile_exec(\"\\\nasync def test():\n    for stop_exc in (StopIteration('spam'), StopAsyncIteration('ham')):\n        with self.subTest(type=type(stop_exc)):\n            try:\n                async with egg():\n                    raise stop_exc\n            except Exception as ex:\n                self.assertIs(ex, stop_exc)\n            else:\n                self.fail(f'{stop_exc} was suppressed')\n\")"
---
  1           0 RESUME               (0)

  3           1 LOAD_CONST           (<code object test at ??? file "source_path", line 1>):  1               0 RETURN_GENERATOR
                  1 POP_TOP
                  2 RESUME               (0)

  2               3 LOAD_GLOBAL          (0, StopIteration)
                  4 PUSH_NULL
                  5 LOAD_CONST           ("spam")
                  6 CALL                 (1)
                  7 LOAD_GLOBAL          (1, StopAsyncIteration)
                  8 PUSH_NULL
                  9 LOAD_CONST           ("ham")
                 10 CALL                 (1)
                 11 BUILD_TUPLE          (2)
                 12 GET_ITER
            >>   13 FOR_ITER             (141)
                 14 STORE_FAST           (0, stop_exc)

  3              15 LOAD_GLOBAL          (2, self)
                 16 LOAD_ATTR            (7, subTest, method=true)
                 17 LOAD_GLOBAL          (4, type)
                 18 PUSH_NULL
                 19 LOAD_FAST_BORROW     (0, stop_exc)
                 20 CALL                 (1)
                 21 LOAD_CONST           (("type"))
                 22 CALL_KW              (1)
                 23 COPY                 (1)
                 24 LOAD_SPECIAL         (__exit__)
                 25 SWAP                 (2)
                 26 LOAD_SPECIAL         (__enter__)
                 27 PUSH_NULL
                 28 CALL                 (0)
                 29 POP_TOP

  5              30 LOAD_GLOBAL          (5, egg)
                 31 PUSH_NULL
                 32 CALL                 (0)
                 33 COPY                 (1)
                 34 LOAD_SPECIAL         (__aexit__)
                 35 SWAP                 (2)
                 36 LOAD_SPECIAL         (__aenter__)
                 37 PUSH_NULL
                 38 CALL                 (0)
                 39 GET_AWAITABLE
                 40 LOAD_CONST           (None)
            >>   41 SEND                 (46)
                 42 YIELD_VALUE          (1)
                 43 RESUME               (3)
                 44 JUMP_BACKWARD_NO_INTERRUPT(41)
                 45 CLEANUP_THROW
            >>   46 END_SEND
                 47 POP_TOP

  6              48 LOAD_FAST_BORROW     (0, stop_exc)
                 49 RAISE_VARARGS        (Raise)

  5              50 PUSH_NULL
                 51 LOAD_CONST           (None)
                 52 LOAD_CONST           (None)
                 53 LOAD_CONST           (None)
                 54 CALL                 (3)
                 55 GET_AWAITABLE
                 56 LOAD_CONST           (None)
            >>   57 SEND                 (62)
                 58 YIELD_VALUE          (1)
                 59 RESUME               (3)
                 60 JUMP_BACKWARD_NO_INTERRUPT(57)
                 61 CLEANUP_THROW
            >>   62 END_SEND
                 63 POP_TOP
                 64 JUMP_FORWARD         (86)
                 65 PUSH_EXC_INFO
                 66 WITH_EXCEPT_START
                 67 GET_AWAITABLE
                 68 LOAD_CONST           (None)
            >>   69 SEND                 (74)
                 70 YIELD_VALUE          (1)
                 71 RESUME               (3)
                 72 JUMP_BACKWARD_NO_INTERRUPT(69)
                 73 CLEANUP_THROW
            >>   74 END_SEND
                 75 TO_BOOL
                 76 POP_JUMP_IF_TRUE     (78)
                 77 RERAISE              (2)
            >>   78 POP_TOP
                 79 POP_EXCEPT
                 80 POP_TOP
                 81 POP_TOP
                 82 JUMP_FORWARD         (86)
                 83 COPY                 (3)
                 84 POP_EXCEPT
                 85 RERAISE              (1)
            >>   86 JUMP_FORWARD         (112)
                 87 PUSH_EXC_INFO

  7              88 LOAD_GLOBAL          (6, Exception)
                 89 CHECK_EXC_MATCH
                 90 POP_JUMP_IF_FALSE    (108)
                 91 STORE_FAST           (1, ex)

  8              92 LOAD_GLOBAL          (2, self)
                 93 LOAD_ATTR            (15, assertIs, method=true)
                 94 LOAD_FAST_BORROW     (1, ex)
                 95 LOAD_FAST_BORROW     (0, stop_exc)
                 96 CALL                 (2)
                 97 POP_TOP
                 98 JUMP_FORWARD         (103)
                 99 LOAD_CONST           (None)
                100 STORE_FAST           (1, ex)
                101 DELETE_FAST          (1, ex)
                102 RAISE_VARARGS        (ReraiseFromStack)
            >>  103 POP_EXCEPT
                104 LOAD_CONST           (None)
                105 STORE_FAST           (1, ex)
                106 DELETE_FAST          (1, ex)
                107 JUMP_FORWARD         (120)
            >>  108 RAISE_VARARGS        (ReraiseFromStack)
                109 COPY                 (3)
                110 POP_EXCEPT
                111 RAISE_VARARGS        (ReraiseFromStack)

 10         >>  112 LOAD_GLOBAL          (2, self)
                113 LOAD_ATTR            (17, fail, method=true)
                114 LOAD_FAST_BORROW     (0, stop_exc)
                115 FORMAT_SIMPLE
                116 LOAD_CONST           (" was suppressed")
                117 BUILD_STRING         (2)
                118 CALL                 (1)
                119 POP_TOP

  3         >>  120 PUSH_NULL
                121 LOAD_CONST           (None)
                122 LOAD_CONST           (None)
                123 LOAD_CONST           (None)
                124 CALL                 (3)
                125 POP_TOP
                126 JUMP_FORWARD         (140)
                127 PUSH_EXC_INFO
                128 WITH_EXCEPT_START
                129 TO_BOOL
                130 POP_JUMP_IF_TRUE     (132)
                131 RERAISE              (2)
            >>  132 POP_TOP
                133 POP_EXCEPT
                134 POP_TOP
                135 POP_TOP
                136 JUMP_FORWARD         (140)
                137 COPY                 (3)
                138 POP_EXCEPT
                139 RERAISE              (1)
            >>  140 JUMP_BACKWARD        (13)
            >>  141 END_FOR
                142 POP_ITER
                143 LOAD_CONST           (None)
                144 RETURN_VALUE

              2 MAKE_FUNCTION
              3 STORE_NAME           (0, test)
              4 LOAD_CONST           (None)
              5 RETURN_VALUE
