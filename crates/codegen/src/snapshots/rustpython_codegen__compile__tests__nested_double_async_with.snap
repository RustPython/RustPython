---
source: crates/codegen/src/compile.rs
expression: "compile_exec(\"\\\nasync def test():\n    for stop_exc in (StopIteration('spam'), StopAsyncIteration('ham')):\n        with self.subTest(type=type(stop_exc)):\n            try:\n                async with egg():\n                    raise stop_exc\n            except Exception as ex:\n                self.assertIs(ex, stop_exc)\n            else:\n                self.fail(f'{stop_exc} was suppressed')\n\")"
---
  3           0 LOAD_CONST           (<code object test at ??? file "source_path", line 1>):  1               0 RESUME               (0)

  2               1 LOAD_GLOBAL          (0, StopIteration)
                  2 PUSH_NULL
                  3 LOAD_CONST           ("spam")
                  4 CALL                 (1)
                  5 LOAD_GLOBAL          (1, StopAsyncIteration)
                  6 PUSH_NULL
                  7 LOAD_CONST           ("ham")
                  8 CALL                 (1)
                  9 BUILD_TUPLE          (2)
                 10 GET_ITER
            >>   11 FOR_ITER             (129)
                 12 STORE_FAST           (0, stop_exc)

  3              13 LOAD_GLOBAL          (2, self)
                 14 LOAD_ATTR            (7, subTest, method=true)
                 15 LOAD_GLOBAL          (4, type)
                 16 PUSH_NULL
                 17 LOAD_FAST            (0, stop_exc)
                 18 CALL                 (1)
                 19 LOAD_CONST           (("type"))
                 20 CALL_KW              (1)
                 21 BEFORE_WITH
                 22 POP_TOP

  5              23 LOAD_GLOBAL          (5, egg)
                 24 PUSH_NULL
                 25 CALL                 (0)
                 26 BEFORE_ASYNC_WITH
                 27 GET_AWAITABLE
                 28 LOAD_CONST           (None)
            >>   29 SEND                 (34)
                 30 YIELD_VALUE          (1)
                 31 RESUME               (3)
                 32 JUMP_BACKWARD        (29)
                 33 CLEANUP_THROW
            >>   34 END_SEND
                 35 POP_TOP

  6              36 LOAD_FAST            (0, stop_exc)
                 37 RAISE_VARARGS        (Raise)

  5              38 PUSH_NULL
                 39 LOAD_CONST           (None)
                 40 LOAD_CONST           (None)
                 41 LOAD_CONST           (None)
                 42 CALL                 (3)
                 43 GET_AWAITABLE
                 44 LOAD_CONST           (None)
            >>   45 SEND                 (50)
                 46 YIELD_VALUE          (1)
                 47 RESUME               (3)
                 48 JUMP_BACKWARD        (45)
                 49 CLEANUP_THROW
            >>   50 END_SEND
                 51 POP_TOP
                 52 JUMP_FORWARD         (74)
                 53 PUSH_EXC_INFO
                 54 WITH_EXCEPT_START
                 55 GET_AWAITABLE
                 56 LOAD_CONST           (None)
            >>   57 SEND                 (62)
                 58 YIELD_VALUE          (1)
                 59 RESUME               (3)
                 60 JUMP_BACKWARD        (57)
                 61 CLEANUP_THROW
            >>   62 END_SEND
                 63 TO_BOOL
                 64 POP_JUMP_IF_TRUE     (66)
                 65 RERAISE              (2)
            >>   66 POP_TOP
                 67 POP_EXCEPT
                 68 POP_TOP
                 69 POP_TOP
                 70 JUMP_FORWARD         (74)
                 71 COPY                 (3)
                 72 POP_EXCEPT
                 73 RERAISE              (1)
            >>   74 JUMP_FORWARD         (100)
                 75 PUSH_EXC_INFO
                 76 COPY                 (1)

  7              77 LOAD_GLOBAL          (6, Exception)
                 78 JUMP_IF_NOT_EXC_MATCH(96)
                 79 STORE_FAST           (1, ex)

  8              80 LOAD_GLOBAL          (2, self)
                 81 LOAD_ATTR            (15, assertIs, method=true)
                 82 LOAD_FAST            (1, ex)
                 83 LOAD_FAST            (0, stop_exc)
                 84 CALL                 (2)
                 85 POP_TOP
                 86 JUMP_FORWARD         (91)
                 87 LOAD_CONST           (None)
                 88 STORE_FAST           (1, ex)
                 89 DELETE_FAST          (1, ex)
                 90 RAISE_VARARGS        (ReraiseFromStack)
            >>   91 POP_EXCEPT
                 92 LOAD_CONST           (None)
                 93 STORE_FAST           (1, ex)
                 94 DELETE_FAST          (1, ex)
                 95 JUMP_FORWARD         (108)
            >>   96 RAISE_VARARGS        (ReraiseFromStack)
                 97 COPY                 (3)
                 98 POP_EXCEPT
                 99 RAISE_VARARGS        (ReraiseFromStack)

 10         >>  100 LOAD_GLOBAL          (2, self)
                101 LOAD_ATTR            (17, fail, method=true)
                102 LOAD_FAST            (0, stop_exc)
                103 FORMAT_SIMPLE
                104 LOAD_CONST           (" was suppressed")
                105 BUILD_STRING         (2)
                106 CALL                 (1)
                107 POP_TOP

  3         >>  108 PUSH_NULL
                109 LOAD_CONST           (None)
                110 LOAD_CONST           (None)
                111 LOAD_CONST           (None)
                112 CALL                 (3)
                113 POP_TOP
                114 JUMP_FORWARD         (128)
                115 PUSH_EXC_INFO
                116 WITH_EXCEPT_START
                117 TO_BOOL
                118 POP_JUMP_IF_TRUE     (120)
                119 RERAISE              (2)
            >>  120 POP_TOP
                121 POP_EXCEPT
                122 POP_TOP
                123 POP_TOP
                124 JUMP_FORWARD         (128)
                125 COPY                 (3)
                126 POP_EXCEPT
                127 RERAISE              (1)
            >>  128 JUMP_BACKWARD        (11)
            >>  129 RETURN_CONST         (None)

              1 MAKE_FUNCTION
              2 STORE_NAME           (0, test)
              3 RETURN_CONST         (None)
