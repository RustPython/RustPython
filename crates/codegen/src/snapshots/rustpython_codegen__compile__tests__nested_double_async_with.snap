---
source: crates/codegen/src/compile.rs
expression: "compile_exec(\"\\\nasync def test():\n    for stop_exc in (StopIteration('spam'), StopAsyncIteration('ham')):\n        with self.subTest(type=type(stop_exc)):\n            try:\n                async with egg():\n                    raise stop_exc\n            except Exception as ex:\n                self.assertIs(ex, stop_exc)\n            else:\n                self.fail(f'{stop_exc} was suppressed')\n\")"
---
  3           0 LOAD_CONST           (<code object test at ??? file "source_path", line 1>):  1               0 RESUME               (0)

  2               1 LOAD_GLOBAL          (0, StopIteration)
                  2 PUSH_NULL
                  3 LOAD_CONST           ("spam")
                  4 CALL                 (1)
                  5 LOAD_GLOBAL          (1, StopAsyncIteration)
                  6 PUSH_NULL
                  7 LOAD_CONST           ("ham")
                  8 CALL                 (1)
                  9 BUILD_TUPLE          (2)
                 10 GET_ITER
            >>   11 FOR_ITER             (139)
                 12 STORE_FAST           (0, stop_exc)

  3              13 LOAD_GLOBAL          (2, self)
                 14 LOAD_ATTR            (7, subTest, method=true)
                 15 LOAD_GLOBAL          (4, type)
                 16 PUSH_NULL
                 17 LOAD_FAST            (0, stop_exc)
                 18 CALL                 (1)
                 19 LOAD_CONST           (("type"))
                 20 CALL_KW              (1)
                 21 COPY                 (1)
                 22 LOAD_SPECIAL         (__exit__)
                 23 SWAP                 (2)
                 24 LOAD_SPECIAL         (__enter__)
                 25 PUSH_NULL
                 26 CALL                 (0)
                 27 POP_TOP

  5              28 LOAD_GLOBAL          (5, egg)
                 29 PUSH_NULL
                 30 CALL                 (0)
                 31 COPY                 (1)
                 32 LOAD_SPECIAL         (__aexit__)
                 33 SWAP                 (2)
                 34 LOAD_SPECIAL         (__aenter__)
                 35 PUSH_NULL
                 36 CALL                 (0)
                 37 GET_AWAITABLE
                 38 LOAD_CONST           (None)
            >>   39 SEND                 (44)
                 40 YIELD_VALUE          (1)
                 41 RESUME               (3)
                 42 JUMP_BACKWARD        (39)
                 43 CLEANUP_THROW
            >>   44 END_SEND
                 45 POP_TOP

  6              46 LOAD_FAST            (0, stop_exc)
                 47 RAISE_VARARGS        (Raise)

  5              48 PUSH_NULL
                 49 LOAD_CONST           (None)
                 50 LOAD_CONST           (None)
                 51 LOAD_CONST           (None)
                 52 CALL                 (3)
                 53 GET_AWAITABLE
                 54 LOAD_CONST           (None)
            >>   55 SEND                 (60)
                 56 YIELD_VALUE          (1)
                 57 RESUME               (3)
                 58 JUMP_BACKWARD        (55)
                 59 CLEANUP_THROW
            >>   60 END_SEND
                 61 POP_TOP
                 62 JUMP_FORWARD         (84)
                 63 PUSH_EXC_INFO
                 64 WITH_EXCEPT_START
                 65 GET_AWAITABLE
                 66 LOAD_CONST           (None)
            >>   67 SEND                 (72)
                 68 YIELD_VALUE          (1)
                 69 RESUME               (3)
                 70 JUMP_BACKWARD        (67)
                 71 CLEANUP_THROW
            >>   72 END_SEND
                 73 TO_BOOL
                 74 POP_JUMP_IF_TRUE     (76)
                 75 RERAISE              (2)
            >>   76 POP_TOP
                 77 POP_EXCEPT
                 78 POP_TOP
                 79 POP_TOP
                 80 JUMP_FORWARD         (84)
                 81 COPY                 (3)
                 82 POP_EXCEPT
                 83 RERAISE              (1)
            >>   84 JUMP_FORWARD         (110)
                 85 PUSH_EXC_INFO

  7              86 LOAD_GLOBAL          (6, Exception)
                 87 CHECK_EXC_MATCH
                 88 POP_JUMP_IF_FALSE    (106)
                 89 STORE_FAST           (1, ex)

  8              90 LOAD_GLOBAL          (2, self)
                 91 LOAD_ATTR            (15, assertIs, method=true)
                 92 LOAD_FAST            (1, ex)
                 93 LOAD_FAST            (0, stop_exc)
                 94 CALL                 (2)
                 95 POP_TOP
                 96 JUMP_FORWARD         (101)
                 97 LOAD_CONST           (None)
                 98 STORE_FAST           (1, ex)
                 99 DELETE_FAST          (1, ex)
                100 RAISE_VARARGS        (ReraiseFromStack)
            >>  101 POP_EXCEPT
                102 LOAD_CONST           (None)
                103 STORE_FAST           (1, ex)
                104 DELETE_FAST          (1, ex)
                105 JUMP_FORWARD         (118)
            >>  106 RAISE_VARARGS        (ReraiseFromStack)
                107 COPY                 (3)
                108 POP_EXCEPT
                109 RAISE_VARARGS        (ReraiseFromStack)

 10         >>  110 LOAD_GLOBAL          (2, self)
                111 LOAD_ATTR            (17, fail, method=true)
                112 LOAD_FAST            (0, stop_exc)
                113 FORMAT_SIMPLE
                114 LOAD_CONST           (" was suppressed")
                115 BUILD_STRING         (2)
                116 CALL                 (1)
                117 POP_TOP

  3         >>  118 PUSH_NULL
                119 LOAD_CONST           (None)
                120 LOAD_CONST           (None)
                121 LOAD_CONST           (None)
                122 CALL                 (3)
                123 POP_TOP
                124 JUMP_FORWARD         (138)
                125 PUSH_EXC_INFO
                126 WITH_EXCEPT_START
                127 TO_BOOL
                128 POP_JUMP_IF_TRUE     (130)
                129 RERAISE              (2)
            >>  130 POP_TOP
                131 POP_EXCEPT
                132 POP_TOP
                133 POP_TOP
                134 JUMP_FORWARD         (138)
                135 COPY                 (3)
                136 POP_EXCEPT
                137 RERAISE              (1)
            >>  138 JUMP_BACKWARD        (11)
            >>  139 END_FOR
                140 POP_ITER
                141 LOAD_CONST           (None)
                142 RETURN_VALUE

              1 MAKE_FUNCTION
              2 STORE_NAME           (0, test)
              3 LOAD_CONST           (None)
              4 RETURN_VALUE
